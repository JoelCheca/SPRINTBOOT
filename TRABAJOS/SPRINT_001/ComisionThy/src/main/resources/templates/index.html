<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
	integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
	crossorigin="anonymous">
<title>Comision App</title>
</head>
<body>

	<nav class="navbar sticky-top navbar-dark bg-dark">
		<div class="container">
			<a class="navbar-brand" href="#!" style="color: #EBEB2F;">UNIVERSIDAD
				DE LA VIDA</a>
		</div>
	</nav>

	<br>
	<div class="container">
	
	
	
	<div class="section-title text-center">
		<br>
		<h2 class="navegacion">SISTEMAS DE COMISIONES Sr. Carlos Soto</h2>
	</div>

		<table class="table table-dark">
			<thead>
				<tr>
					<th scope="col">ITEM</th>
					<th scope="col">DESCRIPCION</th>
					<th scope="col">PRECIO</th>
					<th scope="col">GANANCIA 1</th>
					<th scope="col">GANANCIA 2</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th scope="row">1</th>
					<td>Programacion</td>
					<td>S/. 800.00</td>
					<td>5 %</td>
					<td>7 %</td>
				</tr>
				<tr>
					<th scope="row">2</th>
					<td>Ofimatica</td>
					<td>S/. 500.00</td>
					<td>3 %</td>
					<td>5 %</td>
				</tr>
				<tr>
					<th scope="row">3</th>
					<td>Administracion</td>
					<td>S/. 1,800.00</td>
					<td>8 %</td>
					<td>10 %</td>
				</tr>
				<tr>
					<th scope="row">4</th>
					<td>Otros</td>
					<td>S/. 1,000.00</td>
					<td>4 %</td>
					<td>6 %</td>
				</tr>
			</tbody>
		</table>
	
	
	
	
	
	
	
		<div class="card" th:if="${control ==1}">
			<div class="card-header">Ingreso de datos</div>
			<div class="card-body">
				<form method="post" action="procesar" id="form1">


					<div class="form-group row">
						<label for="cat" class="col-sm-2 col-form-label">Categoría
							del curso:</label>
						<div class="col-sm-10">
							<select class="custom-select" id="cat" name="cat">

								<option th:each="r : ${cat}" th:value="${r.id}"
									th:text="${r.nombre}"></option>

							</select>


						</div>
					</div>

					<div class="form-group row">
						<label for="descripcion" class="col-sm-2 col-form-label">Descripción
							del curso </label>
						<div class="col-sm-10" id="descripcionCurso">
							<input type="text" class="form-control" name="descripcion"
								id="descripcion">

						</div>

					</div>

					<div class="form-group row">
						<label for="part" class="col-sm-2 col-form-label">Participantes::</label>
						<div class="col-sm-10">
							<input type="number" class="form-control" id="part" name="part"
								placeholder="Cantidad de participantes">
						</div>
					</div>

					<div class="form-group row">
						<button type="submit" class="btn btn-primary btn-lg btn-block"
							id="btnProcesar" style="background-color: #040404">Procesar</button>
					</div>

				</form>
			</div>
		</div>

		<div class="card" th:if="${control ==2}">
			<div class="card-header">Resultado</div>
			<div class="card-body">

				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">CATEGORIA DEL CURSO:</label>
					<div class="col-sm-10" th:text="${bean.curso}"></div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">DESCRIPCION DEL
						CURSO</label>
					<div class="col-sm-10" th:text="${bean.descripcion}"></div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">PARTICIPANTES:</label>
					<div class="col-sm-10" th:text="${bean.part}"></div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">PRECIO DEL CURSO: </label>
					<div class="col-sm-10" th:text="${bean.precio}"></div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">IMPORTE DE VENTA:</label>
					<div class="col-sm-10" th:text="${bean.importe}"></div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">IMPUESTO:</label>
					<div class="col-sm-10" th:text="${bean.impuesto}"></div>
				</div>
				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">TOTAL:</label>
					<div class="col-sm-10" th:text="${bean.total}"></div>
				</div>

				<div class="row mb-3">
					<label class="col-sm-2 col-form-label">COMISION:</label>
					<div class="col-sm-10" th:text="${bean.comision}"></div>
				</div>

				<div>
					<form method="get" action="home" class="form-group row">
						<button type="submit" class="btn btn-primary btn-lg btn-block">Nuevo</button>
					</form>
				</div>

			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.6.1.min.js"
		integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
		crossorigin="anonymous"></script>

</body>


<script type="text/javascript">
	$(function() {
		cargarCombos();
		$("#cat").change(fnCargaPrecioCat);
	});

	function cargarCombos() {
		$.get("traerCombos", function(objCombos) {
			llenarCombo("cat", objCombos.cat);
		});
	}

	function llenarCombo(control, arreglo) {
		control = "#" + control;
		$(control).empty();
		$(arreglo).each(function() {
			let option = $(document.createElement('option'));
			option.text(this.nombre);
			option.val(this.id);
			$(control).append(option);
		});
	}

	function fnCargaPrecioCat() {
		let cat = $("#cat").val();
		if (cat == 0) {
			$("#detalleCurso").html("Seleccione un valor correcto.");
			return;
		}
		let url = "traerPrecio";
		let data = "categoria=1&item=" + cat;
		$.get(url, data, function(texto) {
			$("#detalleCurso").html(texto);
		});
	}

	$(function() {
		$("#btnProcesar").click(function() {
			let data = $("#form1").serialize();
			$.post("Procesar", data, function(objJson) {
				$("#divPrograma").html(objJson.curso);
				$("#divDescripcion").html(objJson.descripcion);
				$("#divPart").html(objJson.part);
				$("#divPrecio").html(objJson.precio);
				$("#divImporte").html(objJson.importe);
				$("#divImpuesto").html(objJson.impuesto);
				$("#divTotal").html(objJson.total);
				$("#divComision").html(objJson.comision);
				$("#divResultado").show();
			});
		});
	});

	$(function() {
		$("#btnProcesar2").click(function() {
			let data = $("#divResultado").serialize();
			$.post("home", data, function(respuesta) {
				$("#form1").html(respuesta);
			});
		});
	});
</script>
</html>